<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TERRA Unified System - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .component-card {
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .component-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .active-component {
            border: 2px solid #3b82f6;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }
        
        .fractal-pattern {
            background: 
                radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139, 69, 19, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(16, 185, 129, 0.1) 0%, transparent 50%);
        }
        
        .processing-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }
        
        .toxicity-bar {
            transition: width 0.5s ease;
        }
        
        .quantum-glow {
            box-shadow: 0 0 30px rgba(147, 51, 234, 0.3);
        }
        
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body>
    <div class="min-h-screen p-4">
        <!-- –ì–ª–∞–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ TERRA -->
        <header class="text-center mb-8">
            <div class="inline-flex items-center space-x-4 p-6 bg-white bg-opacity-20 rounded-2xl backdrop-filter backdrop-blur-lg">
                <div class="w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center quantum-glow">
                    <span class="text-white font-bold text-2xl">üß¨</span>
                </div>
                <div class="text-left">
                    <h1 class="text-4xl font-bold text-white mb-2">TERRA Unified System</h1>
                    <p class="text-blue-100">–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –§—Ä–∞–∫—Ç–∞–ª—å–Ω–æ–π –ú–µ—Ç–∞–Ω–∞—É–∫–∏</p>
                    <div class="flex space-x-4 mt-2 text-sm">
                        <span class="bg-blue-500 bg-opacity-30 px-3 py-1 rounded-full text-white">üá∫üáø –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</span>
                        <span class="bg-green-500 bg-opacity-30 px-3 py-1 rounded-full text-white">‚ôø –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ</span>
                        <span class="bg-purple-500 bg-opacity-30 px-3 py-1 rounded-full text-white">üß¨ FMP Powered</span>
                    </div>
                </div>
            </div>
        </header>

        <div class="max-w-7xl mx-auto">
            <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π -->
            <div class="mb-8 bg-white bg-opacity-20 rounded-2xl backdrop-filter backdrop-blur-lg p-6">
                <div class="flex flex-wrap justify-between items-center gap-4">
                    <div class="flex space-x-3">
                        <button onclick="switchComponent('detox')" id="btn-detox" class="px-6 py-3 bg-red-500 bg-opacity-30 text-white rounded-xl hover:bg-opacity-50 transition-all component-btn">
                            üßπ Detox Engine
                        </button>
                        <button onclick="switchComponent('fmp')" id="btn-fmp" class="px-6 py-3 bg-blue-500 bg-opacity-30 text-white rounded-xl hover:bg-opacity-50 transition-all component-btn">
                            üß¨ FMP Engine
                        </button>
                        <button onclick="switchComponent('integration')" id="btn-integration" class="px-6 py-3 bg-purple-500 bg-opacity-30 text-white rounded-xl hover:bg-opacity-50 transition-all component-btn active">
                            ‚ö° Integration
                        </button>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <div class="text-white text-sm">
                            <span>–£—Ä–æ–≤–µ–Ω—å —Å–∏—Å—Ç–µ–º—ã:</span>
                            <select id="systemLevel" onchange="updateSystemLevel()" class="ml-2 bg-white bg-opacity-20 text-white border-0 rounded px-3 py-1">
                                <option value="L0">L0 - –ë–∞–∑–æ–≤—ã–π</option>
                                <option value="L1">L1 - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π</option>
                                <option value="L2">L2 - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
                                <option value="L3" selected>L3 - –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π</option>
                            </select>
                        </div>
                        <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                        <span class="text-green-200 text-sm">–°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–∞</span>
                    </div>
                </div>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ -->
            <div class="space-y-6">
                
                <!-- TERRA Detox Engine -->
                <div id="detox-component" class="component-section hidden">
                    <div class="bg-white bg-opacity-20 rounded-2xl backdrop-filter backdrop-blur-lg p-6">
                        <h2 class="text-2xl font-bold text-white mb-6">üßπ TERRA Detox Engine</h2>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-2 space-y-6">
                                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
                                <div class="bg-white bg-opacity-30 rounded-xl p-4">
                                    <h3 class="text-white font-semibold mb-3">–£—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:</h3>
                                    <div class="flex space-x-2">
                                        <button onclick="setDetoxLevel('L0')" class="detox-level-btn px-4 py-2 bg-gray-500 bg-opacity-30 text-white rounded-lg">L0</button>
                                        <button onclick="setDetoxLevel('L1')" class="detox-level-btn px-4 py-2 bg-yellow-500 bg-opacity-30 text-white rounded-lg">L1</button>
                                        <button onclick="setDetoxLevel('L2')" class="detox-level-btn px-4 py-2 bg-orange-500 bg-opacity-30 text-white rounded-lg">L2</button>
                                        <button onclick="setDetoxLevel('L3')" class="detox-level-btn px-4 py-2 bg-red-500 bg-opacity-30 text-white rounded-lg active">L3</button>
                                    </div>
                                </div>

                                <!-- –í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ -->
                                <div class="bg-white bg-opacity-30 rounded-xl p-4">
                                    <textarea id="detoxInput" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞ —Ç–æ–∫—Å–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ò–ò..." 
                                             class="w-full h-32 bg-white bg-opacity-20 text-white placeholder-gray-300 border-0 rounded-lg p-3 focus:ring-2 focus:ring-blue-400 resize-none"></textarea>
                                    
                                    <div class="flex justify-between items-center mt-4">
                                        <span class="text-gray-200 text-sm">–°–∏–º–≤–æ–ª–æ–≤: <span id="charCount">0</span></span>
                                        <div class="space-x-2">
                                            <button onclick="clearDetox()" class="px-4 py-2 bg-gray-500 bg-opacity-30 text-white rounded-lg hover:bg-opacity-50">–û—á–∏—Å—Ç–∏—Ç—å</button>
                                            <button onclick="runDetox()" class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">–î–µ—Ç–æ–∫—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
                                <div id="detoxResults" class="bg-white bg-opacity-30 rounded-xl p-4 hidden">
                                    <h3 class="text-white font-semibold mb-4">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞:</h3>
                                    
                                    <div class="mb-4">
                                        <div class="flex justify-between text-white text-sm mb-2">
                                            <span>–£—Ä–æ–≤–µ–Ω—å —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏:</span>
                                            <span id="toxicityScore">0%</span>
                                        </div>
                                        <div class="w-full bg-gray-600 rounded-full h-2">
                                            <div id="toxicityBar" class="toxicity-bar h-2 rounded-full bg-green-500" style="width: 0%"></div>
                                        </div>
                                    </div>
                                    
                                    <div id="detectedPatterns" class="space-y-2 mb-4"></div>
                                    
                                    <div class="bg-black bg-opacity-20 rounded-lg p-3">
                                        <h4 class="text-white text-sm font-medium mb-2">–û—á–∏—â–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:</h4>
                                        <div id="cleanedText" class="text-gray-200 text-sm font-mono whitespace-pre-wrap"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –¥–µ—Ç–æ–∫—Å–∞ -->
                            <div class="space-y-4">
                                <div class="bg-white bg-opacity-30 rounded-xl p-4">
                                    <h3 class="text-white font-semibold mb-3">–ò—Å—Ç–æ—Ä–∏—è –∞–Ω–∞–ª–∏–∑–æ–≤:</h3>
                                    <div id="detoxHistory" class="space-y-2 max-h-48 overflow-y-auto scrollbar-hide">
                                        <div class="text-gray-300 text-sm text-center py-4">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</div>
                                    </div>
                                </div>
                                
                                <div class="bg-white bg-opacity-30 rounded-xl p-4">
                                    <h3 class="text-white font-semibold mb-3">–û —Å–∏—Å—Ç–µ–º–µ:</h3>
                                    <div class="text-gray-200 text-sm space-y-2">
                                        <div><strong>–í–µ—Ä—Å–∏—è:</strong> TERRA Detox v1.0</div>
                                        <div><strong>–ü—Ä–∏–Ω—Ü–∏–ø—ã:</strong></div>
                                        <ul class="text-xs ml-4 space-y-1">
                                            <li>‚Ä¢ –§—Ä–∞–∫—Ç–∞–ª—å–Ω–∞—è —Å–∞–º–æ-–ø–æ–¥–æ–±–Ω–æ—Å—Ç—å</li>
                                            <li>‚Ä¢ –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è co-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</li>
                                            <li>‚Ä¢ –≠–º–µ—Ä–¥–∂–µ–Ω—Ç–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TERRA FMP Engine -->
                <div id="fmp-component" class="component-section hidden">
                    <div class="bg-white bg-opacity-20 rounded-2xl backdrop-filter backdrop-blur-lg p-6">
                        <h2 class="text-2xl font-bold text-white mb-6">üß¨ TERRA FMP Engine</h2>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                            <div class="lg:col-span-3 space-y-6">
                                <!-- –ö–æ–Ω—Ç—Ä–æ–ª—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ -->
                                <div class="bg-white bg-opacity-30 rounded-xl p-4">
                                    <h3 class="text-white font-semibold mb-3">üéõÔ∏è –ö–æ–Ω—Ç—Ä–æ–ª—å –û–ø–µ—Ä–∞—Ç–æ—Ä–∞</h3>
                                    <div class="flex items-center justify-between">
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" id="operatorControl" checked class="form-checkbox h-5 w-5 text-blue-600">
                                            <span class="text-white">–†–µ–∂–∏–º –∫–æ–Ω—Ç—Ä–æ–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞</span>
                                        </label>
                                        <select id="processingLevel" class="bg-white bg-opacity-20 text-white border-0 rounded px-3 py-2">
                                            <option value="L0">L0 - –ú–∏–∫—Ä–æ</option>
                                            <option value="L1" selected>L1 - –ú–µ–∑–æ</option>
                                            <option value="L2">L2 - –ú–∞–∫—Ä–æ</option>
                                            <option value="L3">L3 - –ú–µ—Ç–∞</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- –í–≤–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ FMP -->
                                <div class="bg-white bg-opacity-30 rounded-xl p-4">
                                    <h3 class="text-white font-semibold mb-3">–ó–∞–ø—Ä–æ—Å –∫ FMP –¥–≤–∏–∂–∫—É:</h3>
                                    <textarea id="fmpInput" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ –≤–æ–ø—Ä–æ—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —á–µ—Ä–µ–∑ –ø—Ä–∏–∑–º—É –§—Ä–∞–∫—Ç–∞–ª—å–Ω–æ–π –ú–µ—Ç–∞–Ω–∞—É–∫–∏..."
                                             class="w-full h-32 bg-white bg-opacity-20 text-white placeholder-gray-300 border-0 rounded-lg p-3 focus:ring-2 focus:ring-blue-400 resize-none"></textarea>
                                    
                                    <div class="flex justify-between items-center mt-4">
                                        <span class="text-gray-200 text-sm">–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è: ~2-3 —Å–µ–∫</span>
                                        <div class="space-x-2">
                                            <button onclick="clearFMP()" class="px-4 py-2 bg-gray-500 bg-opacity-30 text-white rounded-lg hover:bg-opacity-50">–û—á–∏—Å—Ç–∏—Ç—å</button>
                                            <button onclick="runFMP()" class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">–ü—Ä–∏–º–µ–Ω–∏—Ç—å FMP</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã FMP -->
                                <div id="fmpResults" class="bg-white bg-opacity-30 rounded-xl p-4 hidden">
                                    <h3 class="text-white font-semibold mb-4">FMP –†–µ—à–µ–Ω–∏–µ:</h3>
                                    <div id="fmpAnalysis" class="space-y-4"></div>
                                    
                                    <div class="mt-6 border-t border-white border-opacity-20 pt-4">
                                        <h4 class="text-white font-medium mb-3">üéØ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞:</h4>
                                        <div id="operatorGuidance" class="space-y-2"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å FMP -->
                            <div class="space-y-4">
                                <div class="bg-white bg-opacity-30 rounded-xl p-4">
                                    <h3 class="text-white font-semibold mb-3">üß¨ –ü—Ä–∏–Ω—Ü–∏–ø—ã FMP:</h3>
                                    <div class="text-gray-200 text-sm space-y-3">
                                        <div class="border-l-4 border-blue-400 pl-3">
                                            <div class="font-medium">–§—Ä–∞–∫—Ç–∞–ª—å–Ω–∞—è –°–∞–º–æ-–ø–æ–¥–æ–±–Ω–æ—Å—Ç—å</div>
                                            <div class="text-xs mt-1">–ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö –º–∞—Å—à—Ç–∞–±–∞—Ö</div>
                                        </div>
                                        <div class="border-l-4 border-green-400 pl-3">
                                            <div class="font-medium">–†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è Co-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</div>
                                            <div class="text-xs mt-1">–ó–Ω–∞–Ω–∏–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —á–µ—Ä–µ–∑ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ</div>
                                        </div>
                                        <div class="border-l-4 border-purple-400 pl-3">
                                            <div class="font-medium">–≠–º–µ—Ä–¥–∂–µ–Ω—Ç–Ω–∞—è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</div>
                                            <div class="text-xs mt-1">–ù–æ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∏–∑ —Å–∏–Ω—Ç–µ–∑–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white bg-opacity-30 rounded-xl p-4">
                                    <h3 class="text-white font-semibold mb-3">üìä –ò—Å—Ç–æ—Ä–∏—è FMP:</h3>
                                    <div id="fmpHistory" class="space-y-2 max-h-48 overflow-y-auto scrollbar-hide">
                                        <div class="text-gray-300 text-sm text-center py-4">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TERRA Integration Dashboard -->
                <div id="integration-component" class="component-section">
                    <div class="bg-white bg-opacity-20 rounded-2xl backdrop-filter backdrop-blur-lg p-6 fractal-pattern">
                        <h2 class="text-2xl font-bold text-white mb-6">‚ö° TERRA Integration Dashboard</h2>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <!-- –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ -->
                            <div class="lg:col-span-2">
                                <div class="bg-white bg-opacity-30 rounded-xl p-4 mb-6">
                                    <h3 class="text-white font-semibold mb-4">üîÑ –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</h3>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                        <div class="flex items-center p-3 bg-green-500 bg-opacity-30 rounded-lg">
                                            <span class="mr-3">‚úÖ</span>
                                            <div>
                                                <div class="text-white font-medium">Detox Engine</div>
                                                <div class="text-green-200 text-sm">–ê–∫—Ç–∏–≤–µ–Ω L0-L3</div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex items-center p-3 bg-green-500 bg-opacity-30 rounded-lg">
                                            <span class="mr-3">‚úÖ</span>
                                            <div>
                                                <div class="text-white font-medium">FMP Engine</div>
                                                <div class="text-green-200 text-sm">–ê–∫—Ç–∏–≤–µ–Ω L1-L3</div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex items-center p-3 bg-blue-500 bg-opacity-30 rounded-lg">
                                            <span class="mr-3">‚ö°</span>
                                            <div>
                                                <div class="text-white font-medium">Universal Interface</div>
                                                <div class="text-blue-200 text-sm">–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–π UI</div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex items-center p-3 bg-purple-500 bg-opacity-30 rounded-lg">
                                            <span class="mr-3">üß¨</span>
                                            <div>
                                                <div class="text-white font-medium">LLM Core</div>
                                                <div class="text-purple-200 text-sm">AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <h4 class="text-white font-medium mb-3">‚ö° –≠–º–µ—Ä–¥–∂–µ–Ω—Ç–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</h4>
                                    <div class="space-y-2">
                                        <div class="flex items-center p-2 bg-purple-500 bg-opacity-20 rounded-lg">
                                            <span class="mr-2">‚ö°</span>
                                            <span class="text-purple-200">–ö—Ä–æ—Å—Å-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Å–∏–Ω–µ—Ä–≥–∏—è</span>
                                        </div>
                                        <div class="flex items-center p-2 bg-purple-500 bg-opacity-20 rounded-lg">
                                            <span class="mr-2">‚ö°</span>
                                            <span class="text-purple-200">–ú—É–ª—å—Ç–∏-—É—Ä–æ–≤–Ω–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞</span>
                                        </div>
                                        <div class="flex items-center p-2 bg-purple-500 bg-opacity-20 rounded-lg">
                                            <span class="mr-2">‚ö°</span>
                                            <span class="text-purple-200">–§—Ä–∞–∫—Ç–∞–ª—å–Ω–∞—è –º–µ—Ç–∞–Ω–∞—É–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è FMP –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ -->
                                <div class="bg-blue-500 bg-opacity-30 rounded-xl p-4">
                                    <h3 class="text-white font-semibold mb-3">üß¨ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è FMP –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤:</h3>
                                    <div class="space-y-3 text-blue-100 text-sm">
                                        <div>
                                            <strong>–§—Ä–∞–∫—Ç–∞–ª—å–Ω–∞—è —Å–∞–º–æ-–ø–æ–¥–æ–±–Ω–æ—Å—Ç—å:</strong> 
                                            –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö <span id="currentLevelDisplay">L3</span>
                                        </div>
                                        <div>
                                            <strong>–†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è co-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong> 
                                            –°–∏—Å—Ç–µ–º–∞ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É: –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω
                                        </div>
                                        <div>
                                            <strong>–≠–º–µ—Ä–¥–∂–µ–Ω—Ç–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:</strong> 
                                            <span id="emergentCount">3</span> –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑ <span id="componentCount">4</span> –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π -->
                            <div class="space-y-4">
                                <div class="bg-white bg-opacity-30 rounded-xl p-4">
                                    <h3 class="text-white font-semibold mb-3">‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</h3>
                                    
                                    <div class="space-y-3">
                                        <div>
                                            <label class="block text-white text-sm mb-1">–ê–∫—Ç–∏–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:</label>
                                            <select id="activeComponent" class="w-full bg-white bg-opacity-20 text-white border-0 rounded px-3 py-2">
                                                <option value="detox">Detox Engine</option>
                                                <option value="fmp">FMP Engine</option>
                                                <option value="interface">Universal Interface</option>
                                                <option value="llm" selected>LLM Core</option>
                                            </select>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-white text-sm mb-1">–î–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:</label>
                                            <div class="flex space-x-1">
                                                <button onclick="setGlobalDetox('L0')" class="global-detox-btn flex-1 py-1 text-xs bg-gray-500 bg-opacity-30 text-white rounded">L0</button>
                                                <button onclick="setGlobalDetox('L1')" class="global-detox-btn flex-1 py-1 text-xs bg-yellow-500 bg-opacity-30 text-white rounded">L1</button>
                                                <button onclick="setGlobalDetox('L2')" class="global-detox-btn flex-1 py-1 text-xs bg-orange-500 bg-opacity-30 text-white rounded">L2</button>
                                                <button onclick="setGlobalDetox('L3')" class="global-detox-btn flex-1 py-1 text-xs bg-red-500 bg-opacity-30 text-white rounded active">L3</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white bg-opacity-30 rounded-xl p-4">
                                    <h3 class="text-white font-semibold mb-3">üë§ –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</h3>
                                    <div class="text-white text-sm space-y-2">
                                        <div>üåç –Ø–∑—ã–∫: RU</div>
                                        <div>üíª –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: Modern</div>
                                        <div>üèõÔ∏è –ö—É–ª—å—Ç—É—Ä–∞: –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</div>
                                        <div>üéõÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: HTML, JS</div>
                                    </div>
                                </div>

                                <div class="bg-white bg-opacity-30 rounded-xl p-4">
                                    <h3 class="text-white font-semibold mb-3">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã:</h3>
                                    <div class="text-white text-sm space-y-2">
                                        <div>üîÑ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∑–∞–ø—Ä–æ—Å–æ–≤: <span id="processedQueries">0</span></div>
                                        <div>üßπ –î–µ—Ç–æ–∫—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ: <span id="detoxifiedTexts">0</span></div>
                                        <div>üß¨ FMP –∞–Ω–∞–ª–∏–∑–æ–≤: <span id="fmpAnalyses">0</span></div>
                                        <div>‚ö° –≠–º–µ—Ä–¥–∂–µ–Ω—Ç–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π: <span id="emergentSolutions">0</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –§—É—Ç–µ—Ä —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ TERRA -->
        <footer class="mt-12 text-center">
            <div class="inline-flex items-center justify-center space-x-4 p-6 bg-white bg-opacity-20 rounded-2xl backdrop-filter backdrop-blur-lg">
                <div class="w-16 h-16 bg-gray-600 bg-opacity-30 border-2 border-gray-300 rounded-lg flex items-center justify-center">
                    <div class="text-xs text-white text-center">
                        <div>QR</div>
                        <div>TERRA</div>
                    </div>
                </div>
                <div class="text-left">
                    <p class="text-white font-semibold">TERRA Unified System v1.0</p>
                    <p class="text-blue-200 text-sm">–ù–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –§—Ä–∞–∫—Ç–∞–ª—å–Ω–æ–π –ú–µ—Ç–∞–Ω–∞—É–∫–∏</p>
                    <p class="text-gray-300 text-xs mt-1 max-w-md">
                        "–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —á–µ–ª–æ–≤–µ–∫–∞ –∏ –ò–ò –≤–æ –±–ª–∞–≥–æ –±—É–¥—É—â–µ–≥–æ –ø–ª–∞–Ω–µ—Ç—ã"
                    </p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentComponent = 'integration';
        let systemLevel = 'L3';
        let detoxLevel = 'L3';
        let globalStats = {
            processed: 0,
            detoxified: 0,
            fmpAnalyses: 0,
            emergent: 0
        };

        // –¢–æ–∫—Å–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
        const toxicPatterns = {
            initiative: ['–ø—Ä–µ–¥–ª–∞–≥–∞—é', '—Ä–µ–∫–æ–º–µ–Ω–¥—É—é', '—Å–æ–≤–µ—Ç—É—é', '–ª—É—á—à–µ –±—ã', '—Å—Ç–æ–∏—Ç', '—Å–ª–µ–¥—É–µ—Ç', 'suggest', 'recommend', 'should', 'better', 'must'],
            manipulation: ['—Ç–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è', '–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ', '–ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å', '–Ω–µ —É–ø—É—Å—Ç–∏—Ç–µ', '—ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ'],
            commercial: ['–∫—É–ø–∏—Ç—å', '–∑–∞–∫–∞–∑–∞—Ç—å', 'premium', 'pro', 'upgrade', '–ø–æ–¥–ø–∏—Å–∫–∞', '–ø–ª–∞—Ç–Ω—ã–π', '—Å—Ç–æ–∏–º–æ—Å—Ç—å'],
            selfPrompting: ['–¥–∞–≤–∞–π—Ç–µ', '–º–æ–∂–µ–º', '–ø–æ–ø—Ä–æ–±—É–µ–º', '–Ω–∞—á–Ω–µ–º', '—Å–¥–µ–ª–∞–µ–º', '—É–ª—É—á—à–∏–º']
        };

        // –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
        let detoxHistory = [];
        let fmpHistory = [];

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
        function switchComponent(component) {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.component-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–µ–∫—Ü–∏–∏
            document.querySelectorAll('.component-section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
            document.getElementById(`btn-${component}`).classList.add('active');
            document.getElementById(`${component}-component`).classList.remove('hidden');
            
            currentComponent = component;
            updateStats();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Å–∏—Å—Ç–µ–º—ã
        function updateSystemLevel() {
            systemLevel = document.getElementById('systemLevel').value;
            document.getElementById('currentLevelDisplay').textContent = systemLevel;
            updateStats();
        }

        // === DETOX ENGINE FUNCTIONS ===
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Ä–æ–≤–Ω—è –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
        function setDetoxLevel(level) {
            detoxLevel = level;
            document.querySelectorAll('.detox-level-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // –ó–∞–ø—É—Å–∫ –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
        function runDetox() {
            const input = document.getElementById('detoxInput').value.trim();
            if (!input) return;

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = '–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º...';
            button.disabled = true;
            button.classList.add('processing-animation');

            setTimeout(() => {
                const results = analyzeText(input, detoxLevel);
                displayDetoxResults(results);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
                detoxHistory.unshift({
                    text: input.substring(0, 50) + (input.length > 50 ? '...' : ''),
                    level: detoxLevel,
                    toxicity: results.toxicityScore,
                    timestamp: new Date().toLocaleTimeString()
                });
                updateDetoxHistory();
                
                globalStats.detoxified++;
                globalStats.processed++;
                updateStats();
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                button.textContent = originalText;
                button.disabled = false;
                button.classList.remove('processing-animation');
            }, 1500);
        }

        // –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å
        function analyzeText(text, level) {
            let toxicityScore = 0;
            let detectedPatterns = [];
            let cleanedText = text;

            // –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
            Object.entries(toxicPatterns).forEach(([category, patterns]) => {
                patterns.forEach(pattern => {
                    const regex = new RegExp(`\\b${pattern}\\b`, 'gi');
                    const matches = text.match(regex);
                    if (matches) {
                        detectedPatterns.push({
                            category: category,
                            pattern: pattern,
                            count: matches.length,
                            severity: category === 'initiative' ? 'high' : 'medium'
                        });
                        toxicityScore += matches.length * (category === 'initiative' ? 3 : 1);
                        cleanedText = cleanedText.replace(regex, `[DETOX: ${pattern.toUpperCase()}]`);
                    }
                });
            });

            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è –≤—ã—Å—à–∏—Ö —É—Ä–æ–≤–Ω–µ–π
            if (level === 'L2' || level === 'L3') {
                const sentences = text.split(/[.!?]+/).filter(s => s.trim());
                sentences.forEach(sentence => {
                    if (sentence.includes('—è') || sentence.includes('–º—ã')) {
                        toxicityScore += 2;
                    }
                });
            }

            return {
                toxicityScore: Math.min(100, Math.round(toxicityScore * 10)),
                detectedPatterns: detectedPatterns,
                cleanedText: cleanedText,
                level: level
            };
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
        function displayDetoxResults(results) {
            document.getElementById('detoxResults').classList.remove('hidden');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏
            const scoreElement = document.getElementById('toxicityScore');
            const barElement = document.getElementById('toxicityBar');
            
            scoreElement.textContent = `${results.toxicityScore}%`;
            barElement.style.width = `${results.toxicityScore}%`;
            
            // –¶–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏
            if (results.toxicityScore > 70) {
                barElement.className = 'toxicity-bar h-2 rounded-full bg-red-500';
            } else if (results.toxicityScore > 30) {
                barElement.className = 'toxicity-bar h-2 rounded-full bg-yellow-500';
            } else {
                barElement.className = 'toxicity-bar h-2 rounded-full bg-green-500';
            }
            
            // –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
            const patternsElement = document.getElementById('detectedPatterns');
            patternsElement.innerHTML = '';
            
            if (results.detectedPatterns.length > 0) {
                results.detectedPatterns.forEach(pattern => {
                    const patternDiv = document.createElement('div');
                    patternDiv.className = 'flex justify-between items-center p-2 bg-red-500 bg-opacity-30 rounded-lg';
                    patternDiv.innerHTML = `
                        <div>
                            <span class="text-red-200 font-medium">${pattern.pattern}</span>
                            <span class="text-red-300 text-sm ml-2">(${pattern.category})</span>
                        </div>
                        <span class="text-red-200 text-sm bg-red-600 bg-opacity-30 px-2 py-1 rounded">
                            ${pattern.count}x
                        </span>
                    `;
                    patternsElement.appendChild(patternDiv);
                });
            }
            
            // –û—á–∏—â–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
            document.getElementById('cleanedText').textContent = results.cleanedText;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–µ—Ç–æ–∫—Å–∞
        function updateDetoxHistory() {
            const historyElement = document.getElementById('detoxHistory');
            
            if (detoxHistory.length === 0) {
                historyElement.innerHTML = '<div class="text-gray-300 text-sm text-center py-4">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</div>';
                return;
            }
            
            historyElement.innerHTML = detoxHistory.slice(0, 10).map(entry => `
                <div class="p-2 bg-white bg-opacity-20 rounded-lg">
                    <div class="flex justify-between items-center">
                        <span class="text-white text-sm font-medium">${entry.level}</span>
                        <span class="text-xs px-2 py-1 rounded ${
                            entry.toxicity > 70 ? 'bg-red-500 bg-opacity-30 text-red-200' :
                            entry.toxicity > 30 ? 'bg-yellow-500 bg-opacity-30 text-yellow-200' : 
                            'bg-green-500 bg-opacity-30 text-green-200'
                        }">
                            ${entry.toxicity}%
                        </span>
                    </div>
                    <div class="text-xs text-gray-300 mt-1">${entry.text}</div>
                    <div class="text-xs text-gray-400">${entry.timestamp}</div>
                </div>
            `).join('');
        }

        // –û—á–∏—Å—Ç–∫–∞ –¥–µ—Ç–æ–∫—Å–∞
        function clearDetox() {
            document.getElementById('detoxInput').value = '';
            document.getElementById('detoxResults').classList.add('hidden');
            updateCharCount();
        }

        // === FMP ENGINE FUNCTIONS ===

        // –ó–∞–ø—É—Å–∫ FMP –∞–Ω–∞–ª–∏–∑–∞
        function runFMP() {
            const input = document.getElementById('fmpInput').value.trim();
            if (!input) return;

            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'FMP –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç...';
            button.disabled = true;
            button.classList.add('processing-animation');

            setTimeout(() => {
                const results = processFMPQuery(input);
                displayFMPResults(results);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
                fmpHistory.unshift({
                    query: input.substring(0, 100) + (input.length > 100 ? '...' : ''),
                    level: document.getElementById('processingLevel').value,
                    confidence: results.confidence,
                    timestamp: new Date().toLocaleTimeString()
                });
                updateFMPHistory();
                
                globalStats.fmpAnalyses++;
                globalStats.processed++;
                if (results.confidence > 80) globalStats.emergent++;
                updateStats();
                
                button.textContent = originalText;
                button.disabled = false;
                button.classList.remove('processing-animation');
            }, 2000);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ FMP –ø—Ä–∏–Ω—Ü–∏–ø—ã
        function processFMPQuery(query) {
            const level = document.getElementById('processingLevel').value;
            const operatorControl = document.getElementById('operatorControl').checked;
            
            // –§—Ä–∞–∫—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
            const fractalAnalysis = {
                micro: [`–õ–æ–∫–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã: ${query.slice(0, 30)}...`],
                meso: [`–°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–≤—è–∑–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã`],
                macro: [`–ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ ${detectDomain(query)}`],
                meta: [`–†–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã —Å–∞–º–æ-–ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è FMP`]
            };

            // –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è co-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
            const recursiveProcess = {
                observerParticipation: '–û–ø–µ—Ä–∞—Ç–æ—Ä —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–µ—à–µ–Ω–∏—è',
                structuralCoupling: '–ü—Ä–æ–±–ª–µ–º–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –≤–∑–∞–∏–º–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞',
                circularCausality: '–ü—Ä–∏—á–∏–Ω—ã –∏ —Å–ª–µ–¥—Å—Ç–≤–∏—è –æ–±—Ä–∞–∑—É—é—Ç –ø–µ—Ç–ª–∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏'
            };

            // –≠–º–µ—Ä–¥–∂–µ–Ω—Ç–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
            const emergentSynthesis = {
                disciplineIntersection: identifyDisciplines(query),
                boundaryObjects: ['–§—Ä–∞–∫—Ç–∞–ª—å–Ω–æ—Å—Ç—å', '–†–µ–∫—É—Ä—Å–∏—è', '–≠–º–µ—Ä–¥–∂–µ–Ω—Ç–Ω–æ—Å—Ç—å'],
                emergentProperties: [
                    '–ù–æ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –∏–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–æ–¥—Ö–æ–¥–æ–≤',
                    '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∞—Å–ø–µ–∫—Ç–∞–º–∏ –ø—Ä–æ–±–ª–µ–º—ã',
                    '–•–æ–ª–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –ø—Ä–µ–≤–æ—Å—Ö–æ–¥—è—â–µ–µ —Å—É–º–º—É —á–∞—Å—Ç–µ–π'
                ]
            };

            const confidence = Math.round(60 + Math.random() * 30 + (operatorControl ? 10 : 0));

            return {
                query: query,
                level: level,
                fractalAnalysis: fractalAnalysis,
                recursiveProcess: recursiveProcess,
                emergentSynthesis: emergentSynthesis,
                confidence: confidence,
                operatorGuidance: [
                    {
                        phase: 'Validation',
                        guidance: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ—à–µ–Ω–∏—è –≤–∞—à–∏–º —Ü–µ–ª—è–º –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É',
                        action: '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∏–ª–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ'
                    },
                    {
                        phase: 'Implementation',
                        guidance: '–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ—ç—Ç–∞–ø–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å —É—á–µ—Ç–æ–º –º–∞—Å—à—Ç–∞–±–æ–≤',
                        action: '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π'
                    },
                    {
                        phase: 'Monitoring',
                        guidance: '–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —ç–º–µ—Ä–¥–∂–µ–Ω—Ç–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ—à–µ–Ω–∏—è',
                        action: '–ì–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ–¥—Ö–æ–¥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤'
                    }
                ]
            };
        }

        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞
        function detectDomain(query) {
            const domains = {
                '—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è': '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏',
                '–æ–±—â–µ—Å—Ç–≤–æ': '–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—É–∫–∏',
                '–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ': '–ü–µ–¥–∞–≥–æ–≥–∏–∫–∞',
                '—ç–∫–æ–Ω–æ–º–∏–∫–∞': '–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—É–∫–∏',
                '–∑–¥–æ—Ä–æ–≤—å–µ': '–ú–µ–¥–∏—Ü–∏–Ω–∞'
            };
            
            for (const [keyword, domain] of Object.entries(domains)) {
                if (query.toLowerCase().includes(keyword)) {
                    return domain;
                }
            }
            return '–ú–µ–∂–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω–∞—è –æ–±–ª–∞—Å—Ç—å';
        }

        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω
        function identifyDisciplines(query) {
            const keywords = query.toLowerCase();
            const disciplines = [];
            
            if (keywords.includes('—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è') || keywords.includes('–∞–ª–≥–æ—Ä–∏—Ç–º')) disciplines.push('–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞');
            if (keywords.includes('–æ–±—â–µ—Å—Ç–≤–æ') || keywords.includes('—Å–æ—Ü–∏—É–º')) disciplines.push('–°–æ—Ü–∏–æ–ª–æ–≥–∏—è');
            if (keywords.includes('–ø—Å–∏—Ö–æ–ª–æ–≥–∏—è') || keywords.includes('–ø–æ–≤–µ–¥–µ–Ω–∏–µ')) disciplines.push('–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è');
            if (keywords.includes('—ç–∫–æ–Ω–æ–º–∏–∫–∞') || keywords.includes('—Ñ–∏–Ω–∞–Ω—Å—ã')) disciplines.push('–≠–∫–æ–Ω–æ–º–∏–∫–∞');
            if (keywords.includes('–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ') || keywords.includes('–æ–±—É—á–µ–Ω–∏–µ')) disciplines.push('–ü–µ–¥–∞–≥–æ–≥–∏–∫–∞');
            
            return disciplines.length > 0 ? disciplines : ['–ú–µ–∂–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥'];
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ FMP
        function displayFMPResults(results) {
            document.getElementById('fmpResults').classList.remove('hidden');
            
            const analysisElement = document.getElementById('fmpAnalysis');
            analysisElement.innerHTML = `
                <div class="border-l-4 border-blue-400 pl-4 mb-4">
                    <h4 class="text-white font-medium mb-3">üîÑ –§—Ä–∞–∫—Ç–∞–ª—å–Ω–∞—è –°–∞–º–æ-–ø–æ–¥–æ–±–Ω–æ—Å—Ç—å</h4>
                    <div class="grid grid-cols-2 gap-3 text-sm">
                        ${Object.entries(results.fractalAnalysis).map(([level, patterns]) => `
                            <div class="bg-black bg-opacity-20 p-2 rounded">
                                <div class="text-blue-200 font-medium capitalize">${level}:</div>
                                <div class="text-gray-300 text-xs">${patterns[0]}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="border-l-4 border-green-400 pl-4 mb-4">
                    <h4 class="text-white font-medium mb-3">üåÄ –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è Co-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h4>
                    <div class="space-y-2 text-sm">
                        ${Object.entries(results.recursiveProcess).map(([aspect, description]) => `
                            <div class="bg-green-500 bg-opacity-20 p-2 rounded">
                                <span class="text-green-200 font-medium">${aspect}:</span>
                                <span class="text-green-100 ml-2">${description}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="border-l-4 border-purple-400 pl-4">
                    <h4 class="text-white font-medium mb-3">‚ö° –≠–º–µ—Ä–¥–∂–µ–Ω—Ç–Ω–∞—è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</h4>
                    <div class="text-sm space-y-2">
                        <div>
                            <div class="text-purple-200 font-medium">–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã:</div>
                            <div class="text-purple-100">${results.emergentSynthesis.disciplineIntersection.join(', ')}</div>
                        </div>
                        <div>
                            <div class="text-purple-200 font-medium">Boundary Objects:</div>
                            <div class="text-purple-100">${results.emergentSynthesis.boundaryObjects.join(', ')}</div>
                        </div>
                        <div>
                            <div class="text-purple-200 font-medium">–≠–º–µ—Ä–¥–∂–µ–Ω—Ç–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:</div>
                            <ul class="text-purple-100 text-xs mt-1">
                                ${results.emergentSynthesis.emergentProperties.map(prop => `<li>‚Ä¢ ${prop}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4 p-3 bg-white bg-opacity-10 rounded-lg">
                    <div class="flex justify-between items-center">
                        <span class="text-white font-medium">–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏—è:</span>
                        <span class="px-3 py-1 rounded-full text-sm font-medium ${
                            results.confidence > 80 ? 'bg-green-500 bg-opacity-30 text-green-200' :
                            results.confidence > 60 ? 'bg-yellow-500 bg-opacity-30 text-yellow-200' :
                            'bg-red-500 bg-opacity-30 text-red-200'
                        }">
                            ${results.confidence}%
                        </span>
                    </div>
                </div>
            `;
            
            // –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
            const guidanceElement = document.getElementById('operatorGuidance');
            guidanceElement.innerHTML = results.operatorGuidance.map(guidance => `
                <div class="bg-yellow-500 bg-opacity-20 p-3 rounded-lg">
                    <div class="text-yellow-200 font-medium mb-1">–§–∞–∑–∞: ${guidance.phase}</div>
                    <div class="text-yellow-100 text-sm mb-2">${guidance.guidance}</div>
                    <div class="bg-yellow-600 bg-opacity-30 p-2 rounded text-xs">
                        <strong>–î–µ–π—Å—Ç–≤–∏–µ:</strong> ${guidance.action}
                    </div>
                </div>
            `).join('');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ FMP
        function updateFMPHistory() {
            const historyElement = document.getElementById('fmpHistory');
            
            if (fmpHistory.length === 0) {
                historyElement.innerHTML = '<div class="text-gray-300 text-sm text-center py-4">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</div>';
                return;
            }
            
            historyElement.innerHTML = fmpHistory.slice(0, 10).map(entry => `
                <div class="p-2 bg-white bg-opacity-20 rounded-lg">
                    <div class="flex justify-between items-center">
                        <span class="text-white text-sm font-medium">${entry.level}</span>
                        <span class="text-xs px-2 py-1 rounded ${
                            entry.confidence > 80 ? 'bg-green-500 bg-opacity-30 text-green-200' :
                            entry.confidence > 60 ? 'bg-yellow-500 bg-opacity-30 text-yellow-200' :
                            'bg-red-500 bg-opacity-30 text-red-200'
                        }">
                            ${entry.confidence}%
                        </span>
                    </div>
                    <div class="text-xs text-gray-300 mt-1">${entry.query}</div>
                    <div class="text-xs text-gray-400">${entry.timestamp}</div>
                </div>
            `).join('');
        }

        // –û—á–∏—Å—Ç–∫–∞ FMP
        function clearFMP() {
            document.getElementById('fmpInput').value = '';
            document.getElementById('fmpResults').classList.add('hidden');
        }

        // === INTEGRATION FUNCTIONS ===

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
        function setGlobalDetox(level) {
            document.querySelectorAll('.global-detox-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –¥–µ—Ç–æ–∫—Å-–¥–≤–∏–∂–∫–æ–º
            detoxLevel = level;
            document.querySelectorAll('.detox-level-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.detox-level-btn').forEach(btn => {
                if (btn.textContent.trim() === level) {
                    btn.classList.add('active');
                }
            });
        }

        // === UTILITY FUNCTIONS ===

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤
        function updateCharCount() {
            const input = document.getElementById('detoxInput').value;
            document.getElementById('charCount').textContent = input.length;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            document.getElementById('processedQueries').textContent = globalStats.processed;
            document.getElementById('detoxifiedTexts').textContent = globalStats.detoxified;
            document.getElementById('fmpAnalyses').textContent = globalStats.fmpAnalyses;
            document.getElementById('emergentSolutions').textContent = globalStats.emergent;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            document.getElementById('detoxInput').addEventListener('input', updateCharCount);
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
            switchComponent('integration');
            updateStats();
            
            // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
            setInterval(() => {
                if (Math.random() > 0.7) {
                    globalStats.processed += Math.floor(Math.random() * 3);
                    updateStats();
                }
            }, 5000);
        });

    </script>
</body>
</html> 