name: Scan Duplicates

on:
  workflow_dispatch:

jobs:
  scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Find duplicates and show in log
        run: |
          echo "=== SCANNING FOR DUPLICATES ==="
          find . -type f ! -path './.git/*' -exec sha256sum {} + | sort | uniq -w64 -D --all-repeated=separate > duplicates.txt
          
          echo ""
          echo "=== RESULTS ==="
          if [ -s duplicates.txt ]; then
            cat duplicates.txt
            echo ""
            echo "=== SUMMARY ==="
            wc -l duplicates.txt
          else
            echo "No duplicates found!"
          fi
