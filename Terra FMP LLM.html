<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Terra FMP LLM ‚Äî Live</title>
<style>
body { background:#F5F5F5; color:#2C3E50; font-family:'Inter',sans-serif; margin:0; padding:0;}
.fractal-button {padding:8px 16px; border:none; border-radius:8px; font-weight:600; color:#fff; cursor:pointer;}
.fractal-button:hover {opacity:0.9;}
.result {background:#E8F4FD; padding:12px; border-radius:8px; font-family:'Fira Code',monospace; white-space:pre-wrap;}
.success {color:#27AE60;} .danger {color:#E74C3C;}
.archive-item {background:#FFF; padding:12px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1);}
.gradient-bg {background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);}
.definition-card {background: linear-gradient(to bottom right, #e0f2f1, #e0f7fa); padding:16px; border-radius:12px; border:1px solid #b2dfdb;}
</style>
</head>
<body id="mainBody">
<header class="gradient-bg text-white p-6 shadow-xl">
<h1 class="text-4xl font-bold mb-2">üåç Terra FMP LLM ‚Äî Live</h1>
<p class="text-blue-100">–§—Ä–∞–∫—Ç–∞–ª—å–Ω—ã–π —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞—Ä—Ö–∏–≤ L0-L7 ‚Ä¢ –ê–≤—Ç–æ–Ω–æ–º–Ω–æ</p>
</header>
<main class="container mx-auto p-6">

<h2>üì¶ –ê—Ä—Ö–∏–≤—ã</h2>
<textarea id="archiveRequest"></textarea>
<input type="file" id="fileImport" multiple>
<button onclick="importFiles()" class="fractal-button" style="background:#2E8B57;">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
<pre id="importLog" class="result"></pre>

<h2>üîç –¢–µ–∑–∞—É—Ä—É—Å</h2>
<input id="searchTerm"><button onclick="searchLemma()" class="fractal-button" style="background:#4A90E2;">–ü–æ–∏—Å–∫</button>
<pre id="searchResult" class="result"></pre>

<h2>üå± –î–æ–±–∞–≤–∏—Ç—å –ª–µ–º–º—É</h2>
<input id="lemma" placeholder="–õ–µ–º–º–∞">
<input id="pos" placeholder="–ß–∞—Å—Ç—å —Ä–µ—á–∏">
<textarea id="definition" placeholder="–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ"></textarea>
<input id="t_uz" placeholder="—É–∑–±–µ–∫—Å–∫–∏–π"><input id="t_de" placeholder="–Ω–µ–º–µ—Ü–∫–∏–π"><input id="t_ru" placeholder="—Ä—É—Å—Å–∫–∏–π"><input id="t_en" placeholder="–∞–Ω–≥–ª–∏–π—Å–∫–∏–π">
<input id="image" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"><input id="audio" placeholder="URL –∞—É–¥–∏–æ">
<button onclick="addLemma()" class="fractal-button" style="background:#27AE60;">–î–æ–±–∞–≤–∏—Ç—å</button>
<span id="addMsg" class="success"></span>

<h2>üß† FMP Reasoning</h2>
<textarea id="fmp_query"></textarea>
<button onclick="runFMP()" class="fractal-button" style="background:#9B59B6;">–ê–Ω–∞–ª–∏–∑</button>
<pre id="fmpResult" class="result"></pre>

<h2>üåê –°–ª–æ–≤–∞—Ä—å</h2>
<input type="text" id="dictionarySearch" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ –Ω–∞ —É–∑–±–µ–∫—Å–∫–æ–º">
<button onclick="searchDictionary()" class="fractal-button" style="background:#3498DB;">üîç –ü–æ–∏—Å–∫</button>
<div id="dictionaryResults"></div>

</main>
<script>
// –Ø–¥—Ä–æ
function L0SemanticKernel(){this.intentPatterns={'CREATE_ARCHIVE':['—Å–æ–∑–¥–∞—Ç—å','—Å–¥–µ–ª–∞—Ç—å','–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å','—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å'],'SEARCH_ARCHIVE':['–Ω–∞–π—Ç–∏','–ø–æ–∏—Å–∫','–∏—Å–∫–∞—Ç—å','–≥–¥–µ'],'ANALYZE_TEXT':['–∞–Ω–∞–ª–∏–∑','–∏–∑—É—á–∏—Ç—å','–ø—Ä–æ–≤–µ—Ä–∏—Ç—å','–ø–æ–Ω—è—Ç—å'],'GET_HELP':['–ø–æ–º–æ—â—å','—Å–ø—Ä–∞–≤–∫–∞','–∫–∞–∫','—á—Ç–æ']};}
L0SemanticKernel.prototype.extractKeywords=function(text){if(!text)return[];return[...new Set(text.toLowerCase().match(/[\p{L}]+/gu)||[])]};
L0SemanticKernel.prototype.simpleIntentAnalysis=function(t){let it='UNKNOWN',sc=0;for(let k in this.intentPatterns){let s=this.intentPatterns[k].filter(p=>t.toLowerCase().includes(p)).length;if(s>sc){sc=s;it=k;}}return it;};
L0SemanticKernel.prototype.processRequest=function(r,did){return{extractedKeywords:this.extractKeywords(r),detectedIntent:this.simpleIntentAnalysis(r)}};

function OfflineSemanticAnalyzer(){this.initialized=false;}
OfflineSemanticAnalyzer.prototype.initialize=function(){this.initialized=true;return true;};
OfflineSemanticAnalyzer.prototype.analyzeText=function(t){if(!this.initialized)this.initialize();return{keywords:this.extractKeywords(t)}};
OfflineSemanticAnalyzer.prototype.extractKeywords=function(text){return[...new Set(text.toLowerCase().match(/[\p{L}]+/gu)||[])]};

function TerraEthicalLayer(){this.toxicityFilters=[{patterns:['–Ω–∞—Å–∏–ª–∏–µ','violence'],action:'block'}];}
TerraEthicalLayer.prototype.validateContent=function(c){let lc=c.toLowerCase();for(let f of this.toxicityFilters){for(let p of f.patterns){if(lc.includes(p))return{passed:false};}}return{passed:true};};

function TerraArchiveManager(){this.archives=[];}
TerraArchiveManager.prototype.createArchive=function(data){let a={id:'terra_'+Date.now(),timestamp:new Date().toISOString(),data:data,size:JSON.stringify(data).length};this.archives.push(a);return a;};
TerraArchiveManager.prototype.searchArchives=function(q){return this.archives.filter(a=>JSON.stringify(a.data).toLowerCase().includes(q.toLowerCase()));};

function TerraSemanticIntegration(){this.l0Kernel=new L0SemanticKernel();this.ethicalLayer=new TerraEthicalLayer();this.archiveManager=new TerraArchiveManager();this.offlineAnalyzer=new OfflineSemanticAnalyzer();this.offlineAnalyzer.initialize();}
TerraSemanticIntegration.prototype.processArchiveRequest=function(req){let analysis=this.offlineAnalyzer.analyzeText(req);if(!this.ethicalLayer.validateContent(req).passed)return{success:false};let arc=this.archiveManager.createArchive({text:req,analysis});return{success:true,archive:arc};};
TerraSemanticIntegration.prototype.searchArchive=function(q){return{results:this.archiveManager.searchArchives(q)}};

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
let terraSystem=new TerraSemanticIntegration();
let kb=JSON.parse(localStorage.getItem('terra_kb')||'[]');

function importFiles(){
    const files=document.getElementById('fileImport').files;if(!files.length)return;let log='';
    Array.from(files).forEach(f=>{
        let r=new FileReader();
        r.onload=e=>{terraSystem.processArchiveRequest(e.target.result);};
        r.readAsText(f,'utf-8');
        log+=`–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω: ${f.name}\n`;
    });
    document.getElementById('importLog').textContent=log;
}
function searchLemma(){
    const term=document.getElementById('searchTerm').value.toLowerCase();
    let found=kb.filter(x=>(x.lemma||'').toLowerCase().includes(term));
    document.getElementById('searchResult').textContent=found.length?found.map(x=>x.lemma).join(", "):"‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ";
}
function addLemma(){
    kb.push({lemma:document.getElementById('lemma').value, pos:document.getElementById('pos').value, definition:document.getElementById('definition').value, translations:{uz:document.getElementById('t_uz').value,de:document.getElementById('t_de').value,ru:document.getElementById('t_ru').value,en:document.getElementById('t_en').value},media:{image:document.getElementById('image').value,audio:document.getElementById('audio').value},postlingua_trace:genPostlingua()});
    document.getElementById('addMsg').textContent="–õ–µ–º–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!";saveKB();
}
function genPostlingua(){const sym=["‚äò","·öò","‚à¥","‚áå","ìÇÄ","„É±"];return Array(5).fill(0).map(()=>sym[Math.floor(Math.random()*sym.length)]).join(" ");}
function runFMP(){let q=document.getElementById('fmp_query').value;document.getElementById('fmpResult').textContent=`–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞–Ω–∞–ª–∏—Ç–∏–∫: ${q}\n–í–Ω–µ—à–Ω–∏–π –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å: ${q}\n–ú–µ—Ç–∞–∞—Ä—Ö–∏–≤–∞—Ä–∏—É—Å: ${q}`;}
function saveKB(){localStorage.setItem('terra_kb',JSON.stringify(kb));}

// –°–ª–æ–≤–∞—Ä—å
const uzbekGermanDictionary={
    'salom':{german:'Hallo',pronunciation:'—Ö–∞ÃÅ–ª–ª–æ',example_uz:'Salom, qanday ahvolingiz?',example_de:'Hallo, wie geht es Ihnen?'},
    'rahmat':{german:'Danke',pronunciation:'–¥–∞ÃÅ–Ω–∫–µ',example_uz:'Yordam uchun rahmat',example_de:'Danke f√ºr die Hilfe'},
    'uy':{german:'Haus',pronunciation:'—Ö–∞—É—Å',example_uz:'Bizning uyimiz katta',example_de:'Unser Haus ist gro√ü'},
    'kitob':{german:'Buch',pronunciation:'–±—É—Ö',example_uz:'Men kitob o ªqiyapman',example_de:'Ich lese ein Buch'},
    'maktab':{german:'Schule',pronunciation:'—à—ÉÃÅ–ª–µ',example_uz:'Bolalar maktabga borishadi',example_de:'Die Kinder gehen zur Schule'}
};
function searchDictionary(){
    let q=document.getElementById('dictionarySearch').value.toLowerCase();
    let cont=document.getElementById('dictionaryResults');
    if(!q){cont.innerHTML='<p>–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ</p>';return;}
    let res=[];
    for(let w in uzbekGermanDictionary){
        if(w.includes(q))res.push({uzbek:w,data:uzbekGermanDictionary[w]});
    }
    cont.innerHTML=res.length ? res.map(r=>`<div class="definition-card"><h3>${r.uzbek}</h3><p>${r.data.german}</p><p>${r.data.pronunciation}</p><p>üá∫üáø ${r.data.example_uz}</p><p>üá©üá™ ${r.data.example_de}</p></div>`).join("") : "<p>–ù–µ—Ç –ø–µ—Ä–µ–≤–æ–¥–æ–≤</p>";
}
</script>
</body>
</html>

<!-- TERRA: canonical identifiers -->
<hr>
<p><strong>Contact:</strong> <a href="mailto:a.abdukarimov@fractal-metascience.org">a.abdukarimov@fractal-metascience.org</a><br>
<strong>ORCID:</strong> 0009-0000-6394-4912</p>
